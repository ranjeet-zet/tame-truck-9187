<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,500;0,700;1,300;1,400;1,500;1,700&family=Roboto:wght@100;300;400&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style/login.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">

  </head>
  <body>
    <img
      src="https://prod.smassets.net/assets/cms/cc/app/2.178.0/images/logo-surveymonkey.svg"
      alt=""
      id="nav_logo"
    />

    <div id="form">
      <p id="dont_have">
        Don't have an account?<a href="signup.html">Sign up</a>
      </p>

      <div id="login_container">
        <h1>Log in</h1>
        <label for="">Email address</label><span>NEW!</span><br />
        <input type="email" id="email" placeholder="" />
        <p id="forgot">Forgot email?</p>

        <button id="log_in">Next</button>
        <hr />
      </div>

      <div id="login_container2">
        <p id="line">Or log in with</p>
        <button id="sso">SSO</button>
        <div id="login_logo">
          <a href=""
            ><img
              src="https://icon-library.com/images/microsoft-icon-png/microsoft-icon-png-21.jpg"
              alt=""
              id="microsoft"
          /></a>
          <a href=""
            ><img
              src="https://habitat-nola.org/wp-content/uploads/2017/02/facebook-icon-preview-1.png"
              alt=""
              id="facebook"
          /></a>
          <a href=""
            ><img
              src="https://cdn-icons-png.flaticon.com/512/174/174857.png"
              alt=""
              id="linkedin"
          /></a>
          <a href=""
            ><img
              src="https://www.freepnglogos.com/uploads/google-logo-png/google-logo-png-webinar-optimizing-for-success-google-business-webinar-13.png"
              id="google"
          /></a>
          <a href=""
            ><img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Apple_logo_black.svg/814px-Apple_logo_black.svg.png"
              id="apple"
          /></a>
        </div>

        <div id="names">
          <div id="micro">Microsoft</div>
          <div id="face">Facebook</div>
          <div id="linked">LinkedIn</div>
          <div id="goog">Google</div>
          <div id="app">Apple</div>
        </div>
      </div>
    </div>

    <!-- login password page -->
    <div id="password_login_container">
   

      <div id="login_password_form">
        <p id="login_back">
         <a><i class="fa-solid fa-angle-left"  id="login_back_angle"></i>Back</a>
        </p>
  
        <div  id="login_password_container">
          <h1>Enter password</h1>
          <p>anunwn@gmail.com</p>
          <label for="" id="login_enter_password">Password</label><br />
          <input type="password" id="login_password" placeholder="" />
     <p id="login_details"><a href="">Forgot password?</a></p>
  
  
          <button id="login_account">Log in</button>
  
      </div>
          
       
  
        
      </div>
      </div>
  </body>
</html>

<script>
  let logUser = JSON.parse(localStorage.getItem('users'));
let flag = JSON.parse(localStorage.getItem('flag')) || false;



class LoginUser {
    constructor(email,password) {
            this.email = email;
            this.password = password;
    }

 userValidation() {
    let validate = false;
     validate = this.validateEmail() && this.validatePassword() && this.validateEmailPassword();
     if(validate) {
        alert('Login Successful');
        // window.location = 'index.html'
     }else if (this.validateEmail() == false && this.validatePassword()==true){
        alert('User Doesnot exist');

     }else if (this.validatePassword() === false && this.validateEmail() == true) {
        alert('Incorrect Password')
     }else {
        alert('Wrong Credentials')
     }
        
     }
 

validateEmail() {
    let checkEmail = false;
    logUser.forEach(ele => {
        if(this.email === ele.email) {
            checkEmail=true;
        }
    });
    return checkEmail;
}

validatePassword() {
    let checkPassword = false;
    logUser.forEach(ele => {
        if(this.password === ele.password) {
            checkPassword=true;
        
        }
          
    });
    return checkPassword;
}


validateEmailPassword() {
    let checkEmailPassword = false;
    logUser.forEach(ele => {
        if(this.email === ele.email && this.password === ele.password) {
            checkEmailPassword=true;
             flag= true;
        
        }
          
    });
    localStorage.setItem('flag', JSON.stringify(flag))
    return checkEmailPassword;
}
}

let loggedInUser = () => {
    let email = login_email_store;
    let password = login_password_store;

    let l1 = new LoginUser(email,password);
    l1.userValidation();
}

let login_email_store;  
let login_password_store;
document.getElementById('log_in').addEventListener('click', ()=> {
    login_email_store = document.getElementById('email').value;
    console.log(login_email_store)
    document.getElementById('form').style.display = 'none';
    document.getElementById('password_login_container').style.display = 'block';

});

document.getElementById('login_account').addEventListener('click', ()=> {
    login_email_store = document.getElementById('login_password').value;
    console.log(login_email_store)
   loggedInUser();

});

document.getElementById('login_back').addEventListener('click', () => {
  document.getElementById('form').style.display = 'block';
  document.getElementById('password_login_container').style.display = 'none';
});
</script>